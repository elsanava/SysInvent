# ğŸš€ SysInvent - Sistema de GestiÃ³n de Inventarios

Sistema completo de gestiÃ³n de inventarios con backend robusto en Node.js + Express + Prisma + PostgreSQL.

## âœ¨ CaracterÃ­sticas Principales

### ğŸ“¦ MÃ³dulos del Sistema
- **ğŸ” AutenticaciÃ³n JWT** - Login y registro seguro
- **ğŸ“¦ GestiÃ³n de Productos** - CRUD completo con cÃ³digos automÃ¡ticos
- **ğŸ‘¥ Clientes y Proveedores** - GestiÃ³n de contactos
- **ğŸ·ï¸ CategorÃ­as y Marcas** - OrganizaciÃ³n de productos
- **ğŸ“Š Inventario** - Control de stock y movimientos
- **ğŸ“‹ Ã“rdenes de Compra/Venta** - GestiÃ³n completa de transacciones
- **ğŸ§® Kardex** - Seguimiento detallado de inventario
- **ğŸ“ˆ Reportes** - AnÃ¡lisis y estadÃ­sticas
- **ğŸª Almacenes** - GestiÃ³n multi-almacÃ©n

### ğŸ›¡ï¸ Seguridad y Robustez
- AutenticaciÃ³n JWT con middleware
- ValidaciÃ³n de datos con Prisma
- Manejo centralizado de errores
- CORS configurado
- Variables de entorno seguras

## ğŸ—ï¸ Arquitectura del Proyecto

```
SysInvent/
â”œâ”€â”€ ğŸ“ backend/                 # API Principal
â”‚   â”œâ”€â”€ ğŸ“ prisma/             # Esquema de Base de Datos
â”‚   â”œâ”€â”€ ğŸ“ routes/             # 12 Rutas Organizadas
â”‚   â”œâ”€â”€ ğŸ“ controllers/        # LÃ³gica de Negocio
â”‚   â”œâ”€â”€ ğŸ“ middlewares/        # AutenticaciÃ³n y Validaciones
â”‚   â”œâ”€â”€ ğŸ“ utils/              # Utilidades
â”‚   â”œâ”€â”€ ğŸš€ server.js           # Servidor Principal
â”‚   â””â”€â”€ ğŸ“„ package.json        # Dependencias
â”œâ”€â”€ ğŸ“ public/                 # Frontend (si aplica)
â””â”€â”€ ğŸ“„ README.md              # DocumentaciÃ³n
```

## ğŸ› ï¸ Stack TecnolÃ³gico

### Backend
- **Node.js** - Runtime de JavaScript
- **Express.js** - Framework web
- **Prisma ORM** - Base de datos y migraciones
- **PostgreSQL** - Base de datos relacional
- **JWT** - AutenticaciÃ³n
- **bcrypt** - EncriptaciÃ³n de contraseÃ±as
- **CORS** - Seguridad entre dominios

### Base de Datos
- **PostgreSQL** con 20+ tablas relacionadas
- **Esquema normalizado** con relaciones complejas
- **Migraciones automÃ¡ticas** con Prisma
- **Ãndices optimizados** para performance

## ğŸš€ InstalaciÃ³n RÃ¡pida

### Prerrequisitos
- Node.js 18+
- PostgreSQL 12+
- Git

### 1. Clonar el Repositorio
```bash
git clone https://github.com/elsanava/SysInvent.git
cd SysInvent/backend
```

### 2. Configurar Variables de Entorno
```bash
# Crear archivo .env en backend/
DB_HOST=localhost
DB_USER=postgres
DB_PASS=tu_password
DB_NAME=sisinvent
DB_PORT=5432
JWT_SECRET=tu_jwt_secret
PORT=4000
DATABASE_URL="postgresql://postgres:tu_password@localhost:5432/sisinvent?schema=public"
```

### 3. Instalar Dependencias
```bash
npm install
```

### 4. Configurar Base de Datos
```bash
# Ejecutar migraciones
npx prisma migrate dev --name init

# Generar cliente Prisma
npx prisma generate
```

### 5. Ejecutar el Servidor
```bash
# Desarrollo
npm run dev

# ProducciÃ³n
npm start
```

## ğŸ“š DocumentaciÃ³n de la API

### Endpoints Principales

| MÃ³dulo | Endpoint | MÃ©todos | DescripciÃ³n |
|--------|----------|---------|-------------|
| **Auth** | `/api/auth` | POST | Login y registro |
| **Usuarios** | `/api/usuarios` | GET, POST, PUT, DELETE | GestiÃ³n de usuarios |
| **Productos** | `/api/productos` | GET, POST, PUT, DELETE | CRUD de productos |
| **Clientes** | `/api/clientes` | GET, POST, PUT, DELETE | GestiÃ³n de clientes |
| **Proveedores** | `/api/proveedores` | GET, POST, PUT, DELETE | GestiÃ³n de proveedores |
| **Inventario** | `/api/inventario` | GET, POST | Movimientos y ajustes |
| **Ã“rdenes** | `/api/ordenes-*` | GET, POST, PUT, DELETE | Compra/venta |

### Health Check
```http
GET /api/health
```
**Respuesta:**
```json
{
  "message": "SysInvent API funcionando correctamente",
  "database": "Conectado",
  "timestamp": "2024-01-01T00:00:00.000Z"
}
```

## ğŸ—ƒï¸ Estructura de la Base de Datos

### Tablas Principales
- **usuarios** - Usuarios del sistema
- **productos** - CatÃ¡logo de productos
- **clientes** - InformaciÃ³n de clientes
- **proveedores** - InformaciÃ³n de proveedores
- **categorias** - CategorÃ­as de productos
- **marcas** - Marcas de productos
- **almacenes** - GestiÃ³n de almacenes
- **ordenes_compra/venta** - Transacciones
- **movimientos_inventario** - Historial de stock

## ğŸ”§ Comandos Ãštiles

### Desarrollo
```bash
# Ejecutar con auto-reload
npm run dev

# Abrir Prisma Studio (visor de BD)
npx prisma studio

# Ver estado de migraciones
npx prisma migrate status
```

### Base de Datos
```bash
# Crear nueva migraciÃ³n
npx prisma migrate dev --name nombre_migracion

# Resetear base de datos (desarrollo)
npx prisma migrate reset

# Sincronizar schema
npx prisma db push
```

### ProducciÃ³n
```bash
# Aplicar migraciones en producciÃ³n
npx prisma migrate deploy

# Generar cliente Prisma
npx prisma generate
```

## ğŸ› SoluciÃ³n de Problemas

### Error: "Cannot find module"
```bash
# Reinstalar dependencias
rm -rf node_modules
npm install
```

### Error: ConexiÃ³n a PostgreSQL
- Verificar que PostgreSQL estÃ© ejecutÃ¡ndose
- Confirmar credenciales en `.env`
- Verificar que la base de datos exista

### Error: Prisma Schema
```bash
# Regenerar cliente
npx prisma generate --force

# Validar schema
npx prisma validate
```

## ğŸ“ˆ CaracterÃ­sticas Avanzadas

### ğŸ”„ CÃ³digos AutomÃ¡ticos
- Productos: `PRD-0001`, `PRD-0002`, ...
- Ã“rdenes: `OC-20240101-001`, `OV-20240101-001`

### ğŸ“Š Validaciones
- Stock mÃ­nimo/mÃ¡ximo
- Precios y costos
- Unidades de medida
- Estados de Ã³rdenes

### ğŸ” Seguridad
- ContraseÃ±as encriptadas con bcrypt
- Tokens JWT con expiraciÃ³n
- Middleware de autenticaciÃ³n
- ValidaciÃ³n de roles

## ğŸ¤ ContribuciÃ³n

1. Fork el proyecto
2. Crear una rama feature (`git checkout -b feature/AmazingFeature`)
3. Commit cambios (`git commit -m 'Add AmazingFeature'`)
4. Push a la rama (`git push origin feature/AmazingFeature`)
5. Abrir Pull Request
